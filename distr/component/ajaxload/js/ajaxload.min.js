/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 40:
/***/ ((__unused_webpack_module, exports) => {

var sft = window.SF;

window.SF = window.SF || function(){}

if(sft)
{
    Object.keys(sft).forEach((key) => {
        window.SF[key] = sft[key];
    });
}

exports = window.SF;

SF.AjaxLoad = function(el, opt)
{
    /**
     * @function send() - Отправляет событие
     * @param {*} event 
     */
     this.send = function(event, element,params=false)
     {
        let e = new Event(event,{bubbles:true})

        if(params)
        {
            e.params = params;
        }

        element.dispatchEvent(e);
    }

    /**
     * @function receive() - регистрирует обработчик события
     * @param {*} event 
     * @param {*} handler 
     */
    this.receive = function(event, el, handler)
    {
        if(window.addEventListener)
            el.addEventListener(event, handler, false);
        else if(window.attachEvent)
            el.attachEvent(event, handler);
    }

    this.getAjax = function(el,e)
    {
        BX.ajax.post(
            this.param.src,
            '',
            function (data)
            {
                el.innerHTML = data;
                el.load.style.display = 'none';
            }
        );
    }

    /**
     * extend() - 
     * @param {*} defaults 
     * @param {*} options 
     */
     this.extend = function(defaults, options)
     {
        for(var key in options)
        {
            if(options.hasOwnProperty(key))
            {
                if(Object.prototype.toString.call(options[key]) == '[object Object]')
                {
                    this.extend(defaults[key], options[key]);
                }
                else
                {
                    defaults[key] = options[key];
                }
            }
        }

        return defaults;
    }

    /**
     * @function checklayer() - 
     * @param {*} el 
     */
    this.checklayer = function(el)
    {
        let comp = getComputedStyle(el);

        if(el.getAttribute(this.param.data.loaded) !== 'loaded'
            && comp.display !== 'none')
        {
            el.setAttribute(this.param.data.loaded, 'loaded');
            el.innerHTML = this.param.load;

            setTimeout(this.getAjax.bind(this,el), 1000);
            
        }
        else
        {
            el.setAttribute(this.param.data.loaded, '');
        }

        if(el.hasAttribute(this.param.data.cancel)
            && el.getAttribute(this.param.data.loaded) == 'loaded')
        {
            this.send(this.param.events.cancel, el);
        }
    }

    this.clearInterval = function(callback)
    {
        clearInterval(callback);
    }

    this.init = function(el)
    {
        return setInterval(this.checklayer.bind(this,el),1000);
    }

    /**
     * @var param - параметры
     */
    this.param = {
        load: '<div class="sf-progress"><div class="sf-progress-animation"></div></div>',
        events:
        {
            init: 'ajaxloadinit',
            cancel: 'ajaxloadcanceltrack',
            create: 'ajaxloadcreate',
        },
        data:
        {
            init: 'sf-ajaxload',
            src: 'sf-src',
            cancel: 'sf-canceltrack',
            loaded: 'sf-ajaxloaded',
        },
        attributes: {},
        modifier:
        {
            src: '',
        },
    }

    // === Init

    this.param = this.extend(this.param, opt);

    this.clearTimeout = setInterval(this.checklayer.bind(this,el),1000);

    this.receive(this.param.events.cancel,el,
            this.clearInterval.bind(this,this.clearTimeout));
}

/***/ }),

/***/ 564:
/***/ (() => {

window.addEventListener('DOMContentLoaded',function(e) {
    document.querySelectorAll('[sf-ajaxload]')
    .forEach(
        (item) =>
        {
            let param = {
                src: item.getAttribute('sf-src')
            }

            new SF.AjaxLoad(item,param);
        }
    );
});

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";

// EXTERNAL MODULE: ../sf5/src/component/ajaxload/js/_ajaxload.js
var _ajaxload = __webpack_require__(40);
// EXTERNAL MODULE: ../sf5/src/component/ajaxload/js/_init.js
var _init = __webpack_require__(564);
;// CONCATENATED MODULE: ../sf5/src/component/ajaxload/js/index.js


;// CONCATENATED MODULE: ../sf5/src/component/ajaxload/index.js

})();

/******/ })()
;